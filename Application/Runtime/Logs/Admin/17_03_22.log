[ 2017-03-22T13:49:00+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000246s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000381s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000420s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000064s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000104s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013975s ]
INFO: [ view_parse ] --END-- [ RunTime:0.014012s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000106s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000179s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000308s ]
INFO: [ app_end ] --END-- [ RunTime:0.000346s ]

[ 2017-03-22T13:49:01+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000015s ]
INFO: [ app_init ] --END-- [ RunTime:0.000300s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000305s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000344s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000067s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000115s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013899s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013938s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000129s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000162s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000501s ]
INFO: [ app_end ] --END-- [ RunTime:0.000539s ]

[ 2017-03-22T13:49:04+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000290s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000307s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000344s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000064s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000104s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013305s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013342s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000147s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000179s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000356s ]
INFO: [ app_end ] --END-- [ RunTime:0.000393s ]

[ 2017-03-22T13:49:05+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000015s ]
INFO: [ app_init ] --END-- [ RunTime:0.000377s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000360s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000400s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000069s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000111s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013288s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013325s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000108s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000139s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000319s ]
INFO: [ app_end ] --END-- [ RunTime:0.000358s ]

[ 2017-03-22T13:50:49+08:00 ] 203.130.43.155 /admin.php/Ajax/addNewPost
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000299s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000300s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000339s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
NOTIC: [8] Undefined index: id /data/wwwroot/blog/Application/Admin/Controller/AjaxController.class.php 第 53 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: INSERT INTO `z_post` (`title`,`category`,`tag`,`summary`,`content`,`pubtime`,`mtime`,`ctime`) VALUES ('$_POST,$GLOBALS[\'HTTP_RAW_POST_DATA\']和php://input的区别','php','php://input','接受数据时常会用到的几个东西，记录下来，回头再做个实验','<p>$_POST</p><blockquote><p>只有Coentent-Type的值为application/x-www.form-urlencoded和multipart/form-data两种类型时，$_POST才能获取到数据。</p></blockquote><p>$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]<br/></p><blockquote><p>如果<a href=\"http://lib.csdn.net/base/php\" title=\"PHP知识库\" target=\"_blank\">PHP</a>无法识别Coentent-Type类型，也就无法获取请求数据，这个时候，可以用$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]来获取。</p></blockquote><p>php://input<br/></p><blockquote><p>1.&nbsp;从使用结果看，php://input与$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]的功能是一样的，但是，php://input需要的内存比较小，并且它不受 php.ini 配置文件的限制。</p></blockquote><blockquote><p>2. 如果Coentent-Type的类型为multipart/form-data，使用php://input和$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]是获取不到数据的，除此之外，php://input都能获取到数据。</p></blockquote><blockquote><p>3. 仅当Coentent-Type的类型为application/x-www.form-urlencoded时，使用php://input和$_POST获取到的数据才是一致的。</p></blockquote><blockquote><p>4. 使用方式：使用file_get_contents(&#39;php://input&#39;)获取请求数据。</p></blockquote>','1490161849','1490161849','1490161849') [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category` WHERE `name` = 'php' LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag` WHERE `name` = 'php://input' LIMIT 1   [ RunTime:0.0002s ]
SQL: INSERT INTO `z_tag` (`name`) VALUES ('php://input') [ RunTime:0.0001s ]

[ 2017-03-22T13:50:50+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000295s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000308s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000345s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0004s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000059s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000100s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013116s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013153s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000109s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000140s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000412s ]
INFO: [ app_end ] --END-- [ RunTime:0.000452s ]

[ 2017-03-22T13:50:51+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000245s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000358s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000398s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000056s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000096s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.019226s ]
INFO: [ view_parse ] --END-- [ RunTime:0.019263s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000110s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000142s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000355s ]
INFO: [ app_end ] --END-- [ RunTime:0.000392s ]

[ 2017-03-22T14:40:29+08:00 ] 203.130.43.155 /admin.php/Post/updatePost/id/86
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000014s ]
INFO: [ app_init ] --END-- [ RunTime:0.000310s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000314s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000351s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_post` WHERE `id` = 86 LIMIT 1   [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0004s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000069s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000110s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b94d69ac1621e983387ec69783f12599.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013753s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013791s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000151s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000184s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000325s ]
INFO: [ app_end ] --END-- [ RunTime:0.000364s ]

[ 2017-03-22T14:40:30+08:00 ] 203.130.43.155 /admin.php/Post/updatePost/id/86
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000257s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000303s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000384s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_post` WHERE `id` = 86 LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000061s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000100s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b94d69ac1621e983387ec69783f12599.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013532s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013568s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000108s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000140s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000315s ]
INFO: [ app_end ] --END-- [ RunTime:0.000353s ]

[ 2017-03-22T14:54:00+08:00 ] 203.130.43.155 /admin.php/Ajax/addNewPost
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000247s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000350s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000389s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: UPDATE `z_post` SET `title`='$_POST,$GLOBALS[\'HTTP_RAW_POST_DATA\']和php://input的区别',`category`='php',`tag`='php://input',`summary`='接受数据时常会用到的几个东西，记录下来，回头再做个实验',`content`='<p>								</p><h3>$_POST</h3><p>只有Coentent-Type的值为application/x-<a href=\"http://www.form-urlencoded和multipart/form-data两种类型时，$_POST才能获取到数据。\">www.form-urlencoded和multipart/form-data两种类型时，$_POST才能获取到数据。</a></p><h3>$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;] 或者$HTTP_RAW_POST_DATA</h3><p>如果<a href=\"http://lib.csdn.net/base/php\" title=\"PHP知识库\" target=\"_blank\">PHP</a>无法识别Coentent-Type类型，也就无法获取请求数据，这个时候，可以用$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]来获取。</p><h3>php://input</h3><ol class=\" list-paddingleft-2\" style=\"list-style-type: decimal;\"><li><p>&nbsp;从使用结果看，php://input与$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]的功能是一样的，但是，php://input需要的内存比较小，并且它不受 php.ini 配置文件的限制。</p></li><li><p>如果Coentent-Type的类型为multipart/form-data，使用php://input和$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]是获取不到数据的，除此之外，php://input都能获取到数据。</p></li><li><p>&nbsp;仅当Coentent-Type的类型为application/x-www.form-urlencoded时，使用php://input和$_POST获取到的数据才是一致的。</p></li><li><p>&nbsp;使用方式：使用file_get_contents(&#39;php://input&#39;)获取请求数据。</p></li></ol><p>一段通过curl发送json数据的代码</p><p>请求页面：<br/></p><pre class=\"brush:as3;toolbar:false\">&lt;?php
url&nbsp;=&nbsp;&quot;http://test.ruanwenwu.cn/test2.php&quot;;
$data&nbsp;=&nbsp;array(
&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;3,
&nbsp;&nbsp;&nbsp;&nbsp;&quot;photo&quot;&nbsp;=&gt;&nbsp;&nbsp;array(&quot;pic1&quot;,&quot;pic2&quot;,&quot;pic3&quot;),
);
$data&nbsp;=&nbsp;json_encode($data);
$ch&nbsp;=&nbsp;curl_init();
curl_setopt($ch,&nbsp;CURLOPT_POST,&nbsp;1);
curl_setopt($ch,&nbsp;CURLOPT_URL,&nbsp;$url);
curl_setopt($ch,&nbsp;CURLOPT_POSTFIELDS,&nbsp;$data);
curl_setopt(&nbsp;$ch,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;false&nbsp;);
curl_setopt(&nbsp;$ch,&nbsp;CURLOPT_SSL_VERIFYHOST,&nbsp;false&nbsp;);
curl_setopt($ch,&nbsp;CURLOPT_HTTPHEADER,&nbsp;array(
&nbsp;&nbsp;&nbsp;&nbsp;&#39;Content-Type:&nbsp;application/json;&nbsp;charset=gbk&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&#39;Content-Length:&nbsp;&#39;.strlen($data))
);
$result&nbsp;=&nbsp;curl_exec($ch);
?&gt;</pre><p>接收页面：</p><pre class=\"brush:as3;toolbar:false\">&lt;?php
$data&nbsp;=&nbsp;file_get_contents(&#39;php://input&#39;);
file_put_contents(&quot;ruanwenwue.txt&quot;,&nbsp;$data);die;
$data&nbsp;=&nbsp;json_decode($HTTP_RAW_POST_DATA);
//file_put_contents(&quot;ruanwenwu.txt&quot;,&nbsp;$data-&gt;id);
file_put_contents(&quot;ruanwenwud.txt&quot;,$HTTP_RAW_POST_DATA);</pre><p>因为请求的无法打印，我就直接写入文件了。接收到的json数据需要json_decode之后使用。</p><h3 style=\"white-space: normal;\">补充：什么是x-<a href=\"http://www.form-urlencode/?\">www.form-urlencode?</a></h3><p style=\"white-space: normal;\">看这个表单：</p><pre class=\"brush:as3;toolbar:false\">&lt;?php
&nbsp;&nbsp;&nbsp;&nbsp;header(&quot;Content-type:text/html;charset=gbk&quot;);&nbsp;
?&gt;
&lt;form&nbsp;action&nbsp;=&quot;/test.php&quot;&nbsp;method=&quot;post&quot;&gt;
用户名：&lt;input&nbsp;type=&quot;text&quot;&nbsp;name=&quot;username&quot;&nbsp;/&gt;&lt;br/&gt;
密码：&lt;input&nbsp;type=&quot;password&quot;&nbsp;name=&quot;password&quot;&nbsp;/&gt;&lt;br/&gt;
&lt;input&nbsp;type=&quot;submit&quot;&nbsp;value=&quot;提交&quot;&nbsp;/&gt;
&lt;/form&gt;</pre><p style=\"white-space: normal;\"><img src=\"http://ruanwenwu.cn/ueditor/php/upload/image/20170322/1490165477395726.png\" title=\"1490165477395726.png\" alt=\"blob.png\"/></p><p style=\"white-space: normal;\">通过post请求过去，没有发送图片的情况下，就是application/x-www-form-urlencoded</p><p><br/></p>',`mtime`='1490165640' WHERE `id` = 86 [ RunTime:0.0167s ]
NOTIC: [8] Undefined variable: id /data/wwwroot/blog/Application/Admin/Controller/AjaxController.class.php 第 56 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category` WHERE `name` = 'php' LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag` WHERE `name` = 'php://input' LIMIT 1   [ RunTime:0.0002s ]

[ 2017-03-22T14:54:01+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000248s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000356s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000393s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0004s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000056s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000096s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013149s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013189s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000112s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000144s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000355s ]
INFO: [ app_end ] --END-- [ RunTime:0.000392s ]

[ 2017-03-22T14:54:02+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000439s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000308s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000347s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000060s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000102s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013020s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013059s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000112s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000144s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000331s ]
INFO: [ app_end ] --END-- [ RunTime:0.000369s ]

[ 2017-03-22T14:54:17+08:00 ] 203.130.43.155 /admin.php/Post/updatePost/id/86
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000246s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000332s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000369s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_post` WHERE `id` = 86 LIMIT 1   [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000066s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000119s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b94d69ac1621e983387ec69783f12599.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013879s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013916s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000117s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000149s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000414s ]
INFO: [ app_end ] --END-- [ RunTime:0.000454s ]

[ 2017-03-22T14:54:17+08:00 ] 203.130.43.155 /admin.php/Post/updatePost/id/86
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000249s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000306s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000344s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_post` WHERE `id` = 86 LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000067s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000107s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b94d69ac1621e983387ec69783f12599.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013510s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013546s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000110s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000142s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000314s ]
INFO: [ app_end ] --END-- [ RunTime:0.000353s ]

[ 2017-03-22T14:54:44+08:00 ] 203.130.43.155 /admin.php/Ajax/addNewPost
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000244s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000346s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000386s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: UPDATE `z_post` SET `title`='$_POST,$GLOBALS[\'HTTP_RAW_POST_DATA\']和php://input的区别',`category`='php',`tag`='php://input',`summary`='接受数据时常会用到的几个东西，做了几个小实验，记录一下。',`content`='<p>								</p><h3>$_POST<br/></h3><p>只有Coentent-Type的值为application/x-<a href=\"http://www.form-urlencoded和multipart/form-data两种类型时，$_POST才能获取到数据。\">www.form-urlencoded和multipart/form-data两种类型时，$_POST才能获取到数据。</a></p><h3>$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;] 或者$HTTP_RAW_POST_DATA</h3><p>如果<a href=\"http://lib.csdn.net/base/php\" title=\"PHP知识库\" target=\"_blank\">PHP</a>无法识别Coentent-Type类型，也就无法获取请求数据，这个时候，可以用$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]来获取。</p><h3>php://input</h3><ol class=\" list-paddingleft-2\" style=\"list-style-type: decimal;\"><li><p>&nbsp;从使用结果看，php://input与$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]的功能是一样的，但是，php://input需要的内存比较小，并且它不受 php.ini 配置文件的限制。</p></li><li><p>如果Coentent-Type的类型为multipart/form-data，使用php://input和$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]是获取不到数据的，除此之外，php://input都能获取到数据。</p></li><li><p>&nbsp;仅当Coentent-Type的类型为application/x-www.form-urlencoded时，使用php://input和$_POST获取到的数据才是一致的。</p></li><li><p>&nbsp;使用方式：使用file_get_contents(&#39;php://input&#39;)获取请求数据。</p></li></ol><p>一段通过curl发送json数据的代码</p><p>请求页面：<br/></p><pre class=\"brush:as3;toolbar:false\">&lt;?php
url&nbsp;=&nbsp;&quot;http://test.ruanwenwu.cn/test2.php&quot;;
$data&nbsp;=&nbsp;array(
&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;3,
&nbsp;&nbsp;&nbsp;&nbsp;&quot;photo&quot;&nbsp;=&gt;&nbsp;&nbsp;array(&quot;pic1&quot;,&quot;pic2&quot;,&quot;pic3&quot;),
);
$data&nbsp;=&nbsp;json_encode($data);
$ch&nbsp;=&nbsp;curl_init();
curl_setopt($ch,&nbsp;CURLOPT_POST,&nbsp;1);
curl_setopt($ch,&nbsp;CURLOPT_URL,&nbsp;$url);
curl_setopt($ch,&nbsp;CURLOPT_POSTFIELDS,&nbsp;$data);
curl_setopt(&nbsp;$ch,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;false&nbsp;);
curl_setopt(&nbsp;$ch,&nbsp;CURLOPT_SSL_VERIFYHOST,&nbsp;false&nbsp;);
curl_setopt($ch,&nbsp;CURLOPT_HTTPHEADER,&nbsp;array(
&nbsp;&nbsp;&nbsp;&nbsp;&#39;Content-Type:&nbsp;application/json;&nbsp;charset=gbk&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&#39;Content-Length:&nbsp;&#39;.strlen($data))
);
$result&nbsp;=&nbsp;curl_exec($ch);
?&gt;</pre><p>接收页面：</p><pre class=\"brush:as3;toolbar:false\">&lt;?php
$data&nbsp;=&nbsp;file_get_contents(&#39;php://input&#39;);
file_put_contents(&quot;ruanwenwue.txt&quot;,&nbsp;$data);die;
$data&nbsp;=&nbsp;json_decode($HTTP_RAW_POST_DATA);
//file_put_contents(&quot;ruanwenwu.txt&quot;,&nbsp;$data-&gt;id);
file_put_contents(&quot;ruanwenwud.txt&quot;,$HTTP_RAW_POST_DATA);</pre><p>因为请求的无法打印，我就直接写入文件了。接收到的json数据需要json_decode之后使用。</p><h3 style=\"white-space: normal;\">补充：什么是x-<a href=\"http://www.form-urlencode/?\">www.form-urlencode?</a></h3><p style=\"white-space: normal;\">看这个表单：</p><pre class=\"brush:as3;toolbar:false\">&lt;?php
&nbsp;&nbsp;&nbsp;&nbsp;header(&quot;Content-type:text/html;charset=gbk&quot;);&nbsp;
?&gt;
&lt;form&nbsp;action&nbsp;=&quot;/test.php&quot;&nbsp;method=&quot;post&quot;&gt;
用户名：&lt;input&nbsp;type=&quot;text&quot;&nbsp;name=&quot;username&quot;&nbsp;/&gt;&lt;br/&gt;
密码：&lt;input&nbsp;type=&quot;password&quot;&nbsp;name=&quot;password&quot;&nbsp;/&gt;&lt;br/&gt;
&lt;input&nbsp;type=&quot;submit&quot;&nbsp;value=&quot;提交&quot;&nbsp;/&gt;
&lt;/form&gt;</pre><p style=\"white-space: normal;\"><img src=\"http://ruanwenwu.cn/ueditor/php/upload/image/20170322/1490165477395726.png\" title=\"1490165477395726.png\" alt=\"blob.png\"/></p><p style=\"white-space: normal;\">通过post请求过去，没有发送图片的情况下，就是application/x-www-form-urlencoded</p><p><br/></p><p>							</p>',`mtime`='1490165684' WHERE `id` = 86 [ RunTime:0.0005s ]
NOTIC: [8] Undefined variable: id /data/wwwroot/blog/Application/Admin/Controller/AjaxController.class.php 第 56 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category` WHERE `name` = 'php' LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag` WHERE `name` = 'php://input' LIMIT 1   [ RunTime:0.0001s ]

[ 2017-03-22T14:54:46+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000014s ]
INFO: [ app_init ] --END-- [ RunTime:0.000301s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000319s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000358s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0007s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0004s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000061s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000104s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013274s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013313s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000111s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000143s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000370s ]
INFO: [ app_end ] --END-- [ RunTime:0.000408s ]

[ 2017-03-22T14:54:46+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000246s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000306s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000345s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000063s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000106s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013527s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013566s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000114s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000146s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000367s ]
INFO: [ app_end ] --END-- [ RunTime:0.000406s ]

[ 2017-03-22T20:45:43+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000260s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000305s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000343s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.

[ 2017-03-22T20:45:43+08:00 ] 203.130.43.155 /admin.php/Login/login
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000009s ]
INFO: [ app_init ] --END-- [ RunTime:0.000219s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000307s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000345s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000031s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000069s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.004529s ]
INFO: [ view_parse ] --END-- [ RunTime:0.004567s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000105s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000136s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000308s ]
INFO: [ app_end ] --END-- [ RunTime:0.000341s ]

[ 2017-03-22T20:45:44+08:00 ] 203.130.43.155 /admin.php/Login/login
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000294s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000348s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000386s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000030s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000069s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.014996s ]
INFO: [ view_parse ] --END-- [ RunTime:0.015034s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000105s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000136s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000360s ]
INFO: [ app_end ] --END-- [ RunTime:0.000395s ]

[ 2017-03-22T20:45:46+08:00 ] 203.130.43.155 /admin.php/Ajax/login
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000015s ]
INFO: [ app_init ] --END-- [ RunTime:0.000259s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000351s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000387s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.

[ 2017-03-22T20:45:46+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000259s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000270s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000306s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000063s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000103s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013581s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013617s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000105s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000136s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000304s ]
INFO: [ app_end ] --END-- [ RunTime:0.000342s ]

[ 2017-03-22T20:45:47+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000298s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000311s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000348s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000065s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000105s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013441s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013478s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000107s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000138s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000308s ]
INFO: [ app_end ] --END-- [ RunTime:0.000346s ]

[ 2017-03-22T20:45:49+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000014s ]
INFO: [ app_init ] --END-- [ RunTime:0.000256s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000357s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000393s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000076s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000145s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013804s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013849s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000134s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000166s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000354s ]
INFO: [ app_end ] --END-- [ RunTime:0.000394s ]

[ 2017-03-22T20:45:49+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000250s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000305s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000344s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000082s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000125s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013301s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013338s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000110s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000147s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000321s ]
INFO: [ app_end ] --END-- [ RunTime:0.000360s ]

[ 2017-03-22T20:45:50+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000244s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000348s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000387s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0005s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000056s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000096s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012833s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012870s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000109s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000141s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000304s ]
INFO: [ app_end ] --END-- [ RunTime:0.000340s ]

[ 2017-03-22T20:45:50+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000262s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000312s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000350s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000072s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000169s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013482s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013563s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000138s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000171s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000353s ]
INFO: [ app_end ] --END-- [ RunTime:0.000392s ]

[ 2017-03-22T20:45:52+08:00 ] 203.130.43.155 /admin.php/Post/updatePost/id/85
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000251s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000303s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000382s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_post` WHERE `id` = 85 LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000069s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000129s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b94d69ac1621e983387ec69783f12599.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.014194s ]
INFO: [ view_parse ] --END-- [ RunTime:0.014232s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000112s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000144s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000365s ]
INFO: [ app_end ] --END-- [ RunTime:0.000405s ]

[ 2017-03-22T20:45:53+08:00 ] 203.130.43.155 /admin.php/Post/updatePost/id/85
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000273s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000341s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000379s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_post` WHERE `id` = 85 LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000067s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000118s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b94d69ac1621e983387ec69783f12599.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013569s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013605s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000107s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000139s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000348s ]
INFO: [ app_end ] --END-- [ RunTime:0.000385s ]

[ 2017-03-22T20:49:46+08:00 ] 203.130.43.155 /admin.php/Ajax/addNewPost
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000255s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000300s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000339s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: UPDATE `z_post` SET `title`='php-fpm配置详解',`category`='linux',`tag`='php-fpm',`summary`='简单又详细的php-fpm配置，一目了然',`content`='<p>								</p><h3>将原先的配置文件清空，用以下的替换：<br/></h3><p>vim /usr/local/php/etc/php-fpm.conf</p><pre class=\"brush:as3;toolbar:false\">[global]&nbsp;&nbsp;#全局配置&nbsp;
pid&nbsp;=&nbsp;/usr/local/php/var/run/php-fpm.pid&nbsp;
error_log&nbsp;=&nbsp;/usr/local/php/var/log/php-fpm.log
[www]&nbsp;&nbsp;&nbsp;#池子名称，一个网站可用一个自己的池子名称，池子可以指定自己的用户和用户组，这样更加安全，能够避免一个网站的用户被窃取了，连带的别的网站也受影响。再就是如果一个池子挂了，不至于影响别的池子。&nbsp;
listen&nbsp;=&nbsp;/tmp/php-fcgi.sock#监听的socket，可以自定义比如：/tmp/www.sock&nbsp;
user&nbsp;=&nbsp;php-fpm&nbsp;#池子的用户&nbsp;
group&nbsp;=&nbsp;php-fpm&nbsp;#池子的用户组&nbsp;
pm&nbsp;=&nbsp;dynamic&nbsp;#进程是动态还是静态。如果是static,那么pm.start_servers，pm.min_spare_servers,pm.max_spare_servers都将失效。只有pm.max_children生效。而且数量不会变。&nbsp;
pm.max_children&nbsp;=&nbsp;50&nbsp;
pm.start_servers&nbsp;=&nbsp;20&nbsp;
pm.min_spare_servers&nbsp;=&nbsp;5&nbsp;
pm.max_spare_servers&nbsp;=&nbsp;35&nbsp;
pm.max_requests&nbsp;=&nbsp;500&nbsp;
rlimit_files&nbsp;=&nbsp;1024#这个可以适当提高
slowlog&nbsp;=&nbsp;/tmp/www-slow.log#慢日志
request_slowlog_timeout&nbsp;=&nbsp;1
php-admin-value[open_basedir]&nbsp;=&nbsp;/data/www/&nbsp;#注意，这个要以/结尾，如果值为/data/www，那么实际上限定的是data目录，用户仍然可以在data目录活动。</pre><p>这个slowlog很好用，配置了该项后，执行时间超过1秒的都会被记录到/tmp/www-slow.log中。这对排查问题特别好用。</p><p>b.php</p><h3><img src=\"/ueditor/php/upload/image/20170322/1490186893122948.png\" title=\"1490186893122948.png\" alt=\"blob.png\"/></h3><p>执行后，/tmp/www-slow.log就记录下来了（确实很强大啊）：<br/></p><p><img src=\"/ueditor/php/upload/image/20170322/1490186935131706.png\" title=\"1490186935131706.png\" alt=\"blob.png\"/></p><h3>下面附一个多个进程池子的配置的例子：<br/></h3><pre class=\"brush:as3;toolbar:false\">[global]
pid&nbsp;=&nbsp;/usr/local/php/var/run/php-fpm.pid
error_log&nbsp;=&nbsp;/usr/local/php/var/log/php-fpm.log
[www]
listen&nbsp;=&nbsp;/tmp/www.sock
user&nbsp;=&nbsp;php-fpm
group&nbsp;=&nbsp;php-fpm
pm&nbsp;=&nbsp;dynamic
pm.max_children&nbsp;=&nbsp;50
pm.start_servers&nbsp;=&nbsp;20
pm.min_spare_servers&nbsp;=&nbsp;5
pm.max_spare_servers&nbsp;=&nbsp;35
pm.max_requests&nbsp;=&nbsp;500
rlimit_files&nbsp;=&nbsp;1024
[www1]
listen&nbsp;=&nbsp;/tmp/www1.sock
user&nbsp;=&nbsp;php-fpm
group&nbsp;=&nbsp;php-fpm
pm&nbsp;=&nbsp;dynamic
pm.max_children&nbsp;=&nbsp;50
pm.start_servers&nbsp;=&nbsp;20
pm.min_spare_servers&nbsp;=&nbsp;5
pm.max_spare_servers&nbsp;=&nbsp;35
pm.max_requests&nbsp;=&nbsp;500
rlimit_files&nbsp;=&nbsp;1024</pre><p><img src=\"/ueditor/php/upload/image/20170321/1490099261493853.png\" title=\"1490099261493853.png\" alt=\"blob.png\"/></p><p>（www1的池子起来了）<br/></p><p><img src=\"/ueditor/php/upload/image/20170321/1490099286925169.png\" title=\"1490099286925169.png\" alt=\"blob.png\"/></p><p>(www的池子起来了）</p><h3>php-fpm的池子怎么跟nginx联合起来呢？</h3><p>只需要修改虚拟机的配置如下：</p><pre class=\"brush:as3;toolbar:false\">server
{
&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;80;
&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;111.com;
&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;index.html&nbsp;index.htm&nbsp;index.php;
&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;/data/www;
&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;~&nbsp;\\.php$&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;fastcgi_params;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#fastcgi_pass&nbsp;127.0.0.1:9000;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fastcgi_pass&nbsp;unix:/tmp/www.sock;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fastcgi_index&nbsp;index.php;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fastcgi_param&nbsp;SCRIPT_FILENAME&nbsp;/data/www$fastcgi_script_name;
&nbsp;&nbsp;&nbsp;&nbsp;}
}</pre><p>重启nginx服务，访问网站，发现502了。为什么呢？</p><p>是因为nginx进程的执行用户是nobody，所以必须配置php-fpm配置文件，让php-fpm进程能够允许nobody用户。</p><p>修改php-fpm.conf文件：</p><p><img src=\"/ueditor/php/upload/image/20170321/1490103999566195.png\" title=\"1490103999566195.png\" alt=\"blob.png\"/></p><p>加上这两行，再访问就好了。</p><p>另外，项目的权限要给pool里的用户和用户组权限，在www这个池子里，就是php-fpm。</p><p><img src=\"/ueditor/php/upload/image/20170321/1490104456471097.png\" title=\"1490104456471097.png\" alt=\"blob.png\"/></p><p>有些项目把nginx的执行用户和组配成www,把所有的池子都配成www。</p><p>							</p>',`mtime`='1490186986' WHERE `id` = 85 [ RunTime:0.0121s ]
NOTIC: [8] Undefined variable: id /data/wwwroot/blog/Application/Admin/Controller/AjaxController.class.php 第 56 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category` WHERE `name` = 'linux' LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag` WHERE `name` = 'php-fpm' LIMIT 1   [ RunTime:0.0002s ]

[ 2017-03-22T20:49:48+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000015s ]
INFO: [ app_init ] --END-- [ RunTime:0.000260s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000311s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000349s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0008s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0004s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000062s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000105s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013501s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013542s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000152s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000190s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000330s ]
INFO: [ app_end ] --END-- [ RunTime:0.000368s ]

[ 2017-03-22T20:49:48+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000301s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000356s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000395s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0005s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000054s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000094s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012811s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012848s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000107s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000139s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000350s ]
INFO: [ app_end ] --END-- [ RunTime:0.000393s ]

[ 2017-03-22T20:49:55+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000248s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000317s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000354s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000064s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000102s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013410s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013446s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000109s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000139s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000319s ]
INFO: [ app_end ] --END-- [ RunTime:0.000360s ]

[ 2017-03-22T20:49:56+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000247s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000352s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000390s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0005s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000073s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000134s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.014109s ]
INFO: [ view_parse ] --END-- [ RunTime:0.014147s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000176s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000209s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000352s ]
INFO: [ app_end ] --END-- [ RunTime:0.000390s ]

[ 2017-03-22T21:07:00+08:00 ] 203.130.43.155 /admin.php/Ajax/addNewPost
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000245s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000306s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000355s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
NOTIC: [8] Undefined index: id /data/wwwroot/blog/Application/Admin/Controller/AjaxController.class.php 第 53 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: INSERT INTO `z_post` (`title`,`category`,`tag`,`summary`,`content`,`pubtime`,`mtime`,`ctime`) VALUES ('与客户端配合做数据写入（包括图片处理）','php','base64','客户端传输json数据到php，php入库操作。','<h3>客户端设计图</h3><p><img src=\"/ueditor/php/upload/image/20170322/1490187120560655.png\" title=\"1490187120560655.png\" alt=\"blob.png\"/></p><h3>php需要捕获这些数据，包括图片，入库。</h3><p>客户端最终传输的数据格式：</p><p><img src=\"/ueditor/php/upload/image/20170322/1490187208572030.png\" title=\"1490187208572030.png\" alt=\"blob.png\"/></p><p>注意：photo是去掉了图片类型和base64标志的base64数据格式：</p><p><img src=\"/ueditor/php/upload/image/20170322/1490187266302922.png\" title=\"1490187266302922.png\" alt=\"blob.png\"/>（完整格式）</p><p>php处理：</p><ol class=\" list-paddingleft-2\" style=\"list-style-type: decimal;\"><li><p>通过php://input或者$HTTP_RAW_POST_DATA接收原始数据。json_decode成对象以供使用。伪代码：</p><p>$data = json_decode($HTTP_RAW_POST_DATA)；</p></li><li><p>下载图片。</p></li></ol><pre class=\"brush:as3;toolbar:false\">$img&nbsp;=&nbsp;array();
foreach&nbsp;($data-&gt;photo&nbsp;as&nbsp;$key=&gt;$val){
	$str&nbsp;&nbsp;&nbsp;=&nbsp;&quot;data:image/png;base64,&quot;;&nbsp;&nbsp;&nbsp;&nbsp;//加上头信息，如果有就不需要了
	$str&nbsp;&nbsp;.=&nbsp;$val;
	$img1&nbsp;=&nbsp;down(array(
		&#39;base64Str&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$str,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#base64的字符串
	));
	$img[]&nbsp;=&nbsp;$img1;
}

function&nbsp;down($paramArr){
&nbsp;&nbsp;&nbsp;&nbsp;$options&nbsp;=&nbsp;array(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;base64Str&#39;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;false,&nbsp;#base64的字符串&nbsp;格式为data:image/png;base64,
&nbsp;&nbsp;&nbsp;&nbsp;);
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($paramArr))$options&nbsp;=&nbsp;array_merge($options,&nbsp;$paramArr);
&nbsp;&nbsp;&nbsp;&nbsp;extract($options);
&nbsp;&nbsp;&nbsp;&nbsp;if(!$base64Str)return&nbsp;false;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;$pos&nbsp;=&nbsp;strpos($base64Str,&nbsp;&#39;;base64,&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;if(!$pos)return&nbsp;false;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;base64_decode(substr($base64Str,&nbsp;$pos+8));
&nbsp;&nbsp;&nbsp;&nbsp;$ext&nbsp;&nbsp;=&nbsp;trim(str_replace(&quot;data:image/&quot;,&nbsp;&quot;&quot;,substr($base64Str,&nbsp;0,$pos)));
&nbsp;&nbsp;&nbsp;&nbsp;$tmpFile&nbsp;=&nbsp;&quot;/tmp/&quot;.SYSTEM_TIME&nbsp;.&nbsp;rand(0,&nbsp;1000)&nbsp;.&nbsp;&quot;.&quot;.$ext;
&nbsp;&nbsp;&nbsp;&nbsp;file_put_contents($tmpFile,&nbsp;$data);
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$tmpFile;&nbsp;
}</pre>','1490188020','1490188020','1490188020') [ RunTime:0.0004s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category` WHERE `name` = 'php' LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag` WHERE `name` = 'base64' LIMIT 1   [ RunTime:0.0002s ]
SQL: INSERT INTO `z_tag` (`name`) VALUES ('base64') [ RunTime:0.0001s ]

[ 2017-03-22T21:07:02+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000244s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000344s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000382s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0004s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000057s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000097s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012898s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012935s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000108s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000141s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000306s ]
INFO: [ app_end ] --END-- [ RunTime:0.000384s ]

[ 2017-03-22T21:07:02+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000248s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000306s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000343s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000057s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000097s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012720s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012799s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000111s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000143s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000314s ]
INFO: [ app_end ] --END-- [ RunTime:0.000350s ]

[ 2017-03-22T21:07:33+08:00 ] 203.130.43.155 /admin.php/Post/updatePost/id/87
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000287s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000307s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000344s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_post` WHERE `id` = 87 LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000067s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000108s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b94d69ac1621e983387ec69783f12599.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013727s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013763s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000123s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000161s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000326s ]
INFO: [ app_end ] --END-- [ RunTime:0.000414s ]

[ 2017-03-22T21:07:34+08:00 ] 203.130.43.155 /admin.php/Post/updatePost/id/87
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000398s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000318s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000355s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_post` WHERE `id` = 87 LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000060s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000100s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b94d69ac1621e983387ec69783f12599.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013454s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013489s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000107s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000137s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000350s ]
INFO: [ app_end ] --END-- [ RunTime:0.000388s ]

[ 2017-03-22T21:07:48+08:00 ] 203.130.43.155 /admin.php/Ajax/addNewPost
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000014s ]
INFO: [ app_init ] --END-- [ RunTime:0.000253s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000353s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000393s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: UPDATE `z_post` SET `title`='与客户端配合做数据写入（包括图片处理）',`category`='php',`tag`='base64',`summary`='客户端传输json数据到php，php入库操作。',`content`='<p>								</p><h3>客户端设计图</h3><p><img src=\"/ueditor/php/upload/image/20170322/1490187120560655.png\" title=\"1490187120560655.png\" alt=\"blob.png\"/></p><h3>php需要捕获这些数据，包括图片，入库。</h3><p>客户端最终传输的数据格式：</p><p><img src=\"/ueditor/php/upload/image/20170322/1490187208572030.png\" title=\"1490187208572030.png\" alt=\"blob.png\"/></p><p>注意：photo是去掉了图片类型和base64标志的base64数据格式：</p><p><img src=\"/ueditor/php/upload/image/20170322/1490187266302922.png\" title=\"1490187266302922.png\" alt=\"blob.png\"/>（完整格式）</p><h3>php处理：</h3><ol class=\" list-paddingleft-2\" style=\"list-style-type: decimal;\"><li><p>通过php://input或者$HTTP_RAW_POST_DATA接收原始数据。json_decode成对象以供使用。伪代码：</p><p>$data = json_decode($HTTP_RAW_POST_DATA)；</p></li><li><p>下载图片。</p></li></ol><pre class=\"brush:as3;toolbar:false\">$img&nbsp;=&nbsp;array();
foreach&nbsp;($data-&gt;photo&nbsp;as&nbsp;$key=&gt;$val){
	$str&nbsp;&nbsp;&nbsp;=&nbsp;&quot;data:image/png;base64,&quot;;&nbsp;&nbsp;&nbsp;&nbsp;//加上头信息，如果有就不需要了
	$str&nbsp;&nbsp;.=&nbsp;$val;
	$img1&nbsp;=&nbsp;down(array(
		&#39;base64Str&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$str,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#base64的字符串
	));
	$img[]&nbsp;=&nbsp;$img1;
}

function&nbsp;down($paramArr){
&nbsp;&nbsp;&nbsp;&nbsp;$options&nbsp;=&nbsp;array(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;base64Str&#39;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;false,&nbsp;#base64的字符串&nbsp;格式为data:image/png;base64,
&nbsp;&nbsp;&nbsp;&nbsp;);
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($paramArr))$options&nbsp;=&nbsp;array_merge($options,&nbsp;$paramArr);
&nbsp;&nbsp;&nbsp;&nbsp;extract($options);
&nbsp;&nbsp;&nbsp;&nbsp;if(!$base64Str)return&nbsp;false;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;$pos&nbsp;=&nbsp;strpos($base64Str,&nbsp;&#39;;base64,&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;if(!$pos)return&nbsp;false;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;$data&nbsp;=&nbsp;base64_decode(substr($base64Str,&nbsp;$pos+8));
&nbsp;&nbsp;&nbsp;&nbsp;$ext&nbsp;&nbsp;=&nbsp;trim(str_replace(&quot;data:image/&quot;,&nbsp;&quot;&quot;,substr($base64Str,&nbsp;0,$pos)));
&nbsp;&nbsp;&nbsp;&nbsp;$tmpFile&nbsp;=&nbsp;&quot;/tmp/&quot;.SYSTEM_TIME&nbsp;.&nbsp;rand(0,&nbsp;1000)&nbsp;.&nbsp;&quot;.&quot;.$ext;
&nbsp;&nbsp;&nbsp;&nbsp;file_put_contents($tmpFile,&nbsp;$data);
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$tmpFile;&nbsp;
}</pre><p>							</p>',`mtime`='1490188068' WHERE `id` = 87 [ RunTime:0.0085s ]
NOTIC: [8] Undefined variable: id /data/wwwroot/blog/Application/Admin/Controller/AjaxController.class.php 第 56 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category` WHERE `name` = 'php' LIMIT 1   [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag` WHERE `name` = 'base64' LIMIT 1   [ RunTime:0.0002s ]

[ 2017-03-22T21:07:50+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000253s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000306s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000345s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0003s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000060s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000103s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013083s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013120s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000156s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000240s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000449s ]
INFO: [ app_end ] --END-- [ RunTime:0.000490s ]

[ 2017-03-22T21:07:50+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000247s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000310s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000348s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000058s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000098s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012849s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012885s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000109s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000141s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000355s ]
INFO: [ app_end ] --END-- [ RunTime:0.000393s ]

[ 2017-03-22T22:09:24+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000245s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000307s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000345s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0006s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000070s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000113s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013828s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013866s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000116s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000148s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000373s ]
INFO: [ app_end ] --END-- [ RunTime:0.000412s ]

[ 2017-03-22T22:09:24+08:00 ] 203.130.43.155 /admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000256s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000308s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000345s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0007s ]
SQL: SELECT * FROM `z_category`  [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag`  [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000092s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000158s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 361 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 424 行.
NOTIC: [8] Undefined variable: hospitalInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/b595b808c2ebeeeb0478ffc30bb4e87a.php 第 438 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.014003s ]
INFO: [ view_parse ] --END-- [ RunTime:0.014041s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000135s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000167s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000372s ]
INFO: [ app_end ] --END-- [ RunTime:0.000453s ]

[ 2017-03-22T22:16:42+08:00 ] 203.130.43.155 /admin.php/Ajax/addNewPost
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000290s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000298s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000336s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
NOTIC: [8] Undefined index: id /data/wwwroot/blog/Application/Admin/Controller/AjaxController.class.php 第 53 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: INSERT INTO `z_post` (`title`,`category`,`tag`,`summary`,`content`,`pubtime`,`mtime`,`ctime`) VALUES ('nginx用户认证','一个更加安全的措施','安全','反正就是更安全了，看看就知道。','<h3>最后的效果：</h3><p><img src=\"/ueditor/php/upload/image/20170322/1490191768608433.png\" title=\"1490191768608433.png\" alt=\"blob.png\"/></p><h3>配置：</h3><p>cat /usr/local/nginx/conf/vhosts/111.conf</p><p>server</p><p>{</p><p>&nbsp; &nbsp; listen 80;</p><p>&nbsp; &nbsp; server_name www.111.com;</p><p>&nbsp; &nbsp; index index.html index.htm index.php;</p><p>&nbsp; &nbsp; root /data/www/upload;</p><p><br/></p><p><span style=\"color: rgb(255, 0, 0);\">&nbsp; &nbsp; location ~ .*admin\\.php$ {</span></p><p><span style=\"color: rgb(255, 0, 0);\"><span class=\"Apple-tab-span\" style=\"color: rgb(255, 0, 0); white-space: pre;\">	</span>auth_basic &quot;ruanwenwu auth&quot;;</span></p><p><span style=\"color: rgb(255, 0, 0);\"><span class=\"Apple-tab-span\" style=\"color: rgb(255, 0, 0); white-space: pre;\">	</span>auth_basic_user_file /usr/local/nginx/conf/.htpasswd;</span></p><p><span style=\"color: rgb(255, 0, 0);\">&nbsp; &nbsp; }</span></p><p><span style=\"white-space: pre; color: rgb(255, 0, 0);\">	</span></p><p><br/></p><p>&nbsp; &nbsp; location ~ \\.php$ {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; include fastcgi_params;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; #fastcgi_pass 127.0.0.1:9000; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_pass unix:/tmp/www.sock;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_index index.php;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param SCRIPT_FILENAME /data/www/upload$fastcgi_script_name;</p><p>&nbsp; &nbsp; }</p><p><br/></p><p>}</p><h3>就是红色的部分起的作用。但是这样有个问题，就是授权后（登陆），admin.php会被下载，这简直太可怕了。这是因为这个规则不能解析php.</h3><p><img src=\"/ueditor/php/upload/image/20170322/1490191958876201.png\" title=\"1490191958876201.png\" alt=\"blob.png\"/>(下载了）</p><p>怎么办?答案是让这部分配置支持php解析就好了，将配置文件修改如下：</p><p>server</p><p>{</p><p>&nbsp; &nbsp; listen 80;</p><p>&nbsp; &nbsp; server_name www.111.com;</p><p>&nbsp; &nbsp; index index.html index.htm index.php;</p><p>&nbsp; &nbsp; root /data/www/upload;</p><p><br/></p><p><span style=\"color: rgb(255, 0, 0);\">&nbsp; &nbsp; location ~ .*admin\\.php$ {</span></p><p><span style=\"color: rgb(255, 0, 0);\"><span class=\"Apple-tab-span\" style=\"color: rgb(255, 0, 0); white-space: pre;\">	</span>auth_basic &quot;ruanwenwu auth&quot;;</span></p><p><span style=\"color: rgb(255, 0, 0);\"><span class=\"Apple-tab-span\" style=\"color: rgb(255, 0, 0); white-space: pre;\">	</span>auth_basic_user_file /usr/local/nginx/conf/.htpasswd;</span></p><p><span style=\"color: rgb(255, 0, 0);\">&nbsp; &nbsp; &nbsp; &nbsp; include fastcgi_params;</span></p><p><span style=\"color: rgb(255, 0, 0);\">&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_pass unix:/tmp/www.sock;</span></p><p><span style=\"color: rgb(255, 0, 0);\">&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_index index.php;</span></p><p><span style=\"color: rgb(255, 0, 0);\">&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param SCRIPT_FILENAME /data/www/upload$fastcgi_script_name;</span></p><p><span style=\"color: rgb(255, 0, 0);\">&nbsp; &nbsp; }</span></p><p><span style=\"white-space: pre; color: rgb(255, 0, 0);\">	</span></p><p><br/></p><p>&nbsp; &nbsp; location ~ \\.php$ {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; include fastcgi_params;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; #fastcgi_pass 127.0.0.1:9000; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_pass unix:/tmp/www.sock;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_index index.php;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param SCRIPT_FILENAME /data/www/upload$fastcgi_script_name;</p><p>&nbsp; &nbsp; }</p><p><br/></p><p>}</p><p>这样就正常了，不会再下载了。</p>','1490192202','1490192202','1490192202') [ RunTime:0.0138s ]
SQL: SHOW COLUMNS FROM `z_category` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_category` WHERE `name` = '一个更加安全的措施' LIMIT 1   [ RunTime:0.0002s ]
SQL: INSERT INTO `z_category` (`name`) VALUES ('一个更加安全的措施') [ RunTime:0.0001s ]
SQL: SHOW COLUMNS FROM `z_tag` [ RunTime:0.0003s ]
SQL: SELECT * FROM `z_tag` WHERE `name` = '安全' LIMIT 1   [ RunTime:0.0002s ]

[ 2017-03-22T22:16:43+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000249s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000351s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000390s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0004s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000055s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000095s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012913s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012949s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000107s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000139s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000363s ]
INFO: [ app_end ] --END-- [ RunTime:0.000400s ]

[ 2017-03-22T22:16:43+08:00 ] 203.130.43.155 /admin.php/Post/all
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000245s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000352s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000391s ]
NOTIC: [8] A session had already been started - ignoring session_start() /data/wwwroot/blog/ThinkPHP/Common/functions.php 第 1263 行.
SQL: SHOW COLUMNS FROM `z_post` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `z_post` LIMIT 1   [ RunTime:0.0001s ]
SQL: SELECT * FROM `z_post` ORDER BY ctime desc LIMIT 0,20   [ RunTime:0.0001s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000056s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000096s ]
NOTIC: [8] Undefined variable: userInfo /data/wwwroot/blog/Application/Runtime/Cache/Admin/c171e2b85832ae9943251ee8295bfacb.php 第 361 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.013022s ]
INFO: [ view_parse ] --END-- [ RunTime:0.013058s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000109s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000140s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000305s ]
INFO: [ app_end ] --END-- [ RunTime:0.000342s ]

